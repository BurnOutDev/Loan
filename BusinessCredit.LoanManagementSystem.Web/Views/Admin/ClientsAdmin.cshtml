@model IEnumerable<BusinessCredit.LoanManagementSystem.Web.Models.AdminClientsViewModel>

@{
    ViewBag.Title = "AdminClients";
}

<h2>კლიენტები</h2>

<p>
        <select id="cbxBranches" onchange="ChangeDatabase()">
            <option value="Central">ცენტრალური</option>
            <option value="Isani">ისანი</option>
            <option value="Okriba">ოკრიბა</option>
            <option value="Lilo">ლილო</option>
            <option value="Eliava">ელიავა</option>
            <option value="Vagzali">ვაგზალი</option>
        </select>
</p>

<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.AccountID)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Name)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.LastName)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.PrivateNumber)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.PhysicalAddress)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.NumberMobile)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.AccountNumber)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.BusinessPhysicalAddress)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Branch)
        </th>
        <th></th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.AccountID)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Name)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.LastName)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.PrivateNumber)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.PhysicalAddress)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.NumberMobile)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.AccountNumber)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.BusinessPhysicalAddress)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Branch)
        </td>
        <td>
            <a onclick="RedirectEdit(@item.AccountID)">Edit</a>
        </td>
    </tr>
}

</table>

<script>
    cbxBranches.selectedIndex = localStorage.getItem('branch');

    function ChangeDatabase() {
        localStorage.setItem('branch', cbxBranches.selectedIndex);
        window.location.href = "?branch=" + cbxBranches.selectedIndex;
    }

    function RedirectEdit(id) {
        window.location.href = "../Admin/ClientEdit" + "?accountID=" + id + "&branch=" + localStorage.getItem('branch');
    }
</script>